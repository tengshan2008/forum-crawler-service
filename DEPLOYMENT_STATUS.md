# è®ºå›çˆ¬è™«æœåŠ¡ - éƒ¨ç½²çŠ¶æ€æŠ¥å‘Š

## âœ… éƒ¨ç½²æˆåŠŸ

æ‰€æœ‰æœåŠ¡å·²æˆåŠŸéƒ¨ç½²å¹¶æ­£å¸¸è¿è¡Œï¼

## ğŸš€ æœåŠ¡çŠ¶æ€

| æœåŠ¡ | çŠ¶æ€ | ç«¯å£ | è¯´æ˜ |
|------|------|------|------|
| **Frontend** | âœ… è¿è¡Œä¸­ | 3000 | React Web UI - ä»»åŠ¡ç®¡ç†å’Œå†…å®¹é¢„è§ˆ |
| **Backend API** | âœ… è¿è¡Œä¸­ | 5000 | Node.js/Express REST API |
| **MongoDB** | âœ… è¿è¡Œä¸­ (å¥åº·) | 27017 | æ•°æ®æŒä¹…åŒ–å­˜å‚¨ |
| **Redis** | âœ… è¿è¡Œä¸­ (å¥åº·) | 6379 | ç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ— |

## ğŸ“‹ å¿«é€Ÿè®¿é—®

### Web ç•Œé¢
- **URL**: http://localhost:3000
- **åŠŸèƒ½**:
  - ğŸ“ çˆ¬è™«ä»»åŠ¡ç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å¯åŠ¨ã€æš‚åœã€ç»§ç»­ï¼‰
  - ğŸ‘ï¸ çˆ¬å–å†…å®¹é¢„è§ˆï¼ˆå›¾ç‰‡åº“ã€å¡ç‰‡ç½‘æ ¼å±•ç¤ºï¼‰
  - ğŸ“Š ä»»åŠ¡ç»Ÿè®¡å’Œè¿›åº¦è·Ÿè¸ª

### API æ¥å£
- **åŸºç¡€ URL**: http://localhost:5000
- **å¥åº·æ£€æŸ¥**: `GET /health`
- **ä»»åŠ¡åˆ—è¡¨**: `GET /api/tasks`
- **æ–°å»ºä»»åŠ¡**: `POST /api/tasks`
- **æ–‡ç« åˆ—è¡¨**: `GET /api/posts`

### æ•°æ®åº“
- **MongoDB**: mongodb://localhost:27017
- **è®¤è¯**: admin / admin123
- **æ•°æ®åº“**: forum-crawler

### ç¼“å­˜
- **Redis**: localhost:6379
- **ç”¨é€”**: ä»»åŠ¡é˜Ÿåˆ—ã€ç¼“å­˜ã€ä¼šè¯å­˜å‚¨

## ğŸ”§ æœ€è¿‘ä¿®å¤çš„é—®é¢˜

### 1. ç¼ºå¤± CSS æ–‡ä»¶ âœ…
- **é—®é¢˜**: `frontend/src/App.css` æ–‡ä»¶ç¼ºå¤±
- **è§£å†³**: åˆ›å»ºäº†å®Œæ•´çš„ CSS æ ·å¼æ–‡ä»¶
- **ç»“æœ**: å‰ç«¯æˆåŠŸæ„å»º

### 2. Docker Compose è·¯å¾„é—®é¢˜ âœ…
- **é—®é¢˜**: docker-compose.yml ä¸­çš„ context è·¯å¾„é”™è¯¯
- **è§£å†³**: å°† `context: .` æ”¹ä¸º `context: ..`
- **ç»“æœ**: æ‰€æœ‰å®¹å™¨æ­£ç¡®å¼•ç”¨é¡¹ç›®æ–‡ä»¶

### 3. åç«¯å¯åŠ¨è„šæœ¬é—®é¢˜ âœ…
- **é—®é¢˜**: npm run dev ä¾èµ– nodemonï¼ˆä»…å¼€å‘ä¾èµ–ï¼‰
- **è§£å†³**: æ”¹ä¸ºä½¿ç”¨ npm startï¼ˆç”Ÿäº§å‘½ä»¤ï¼‰
- **ç»“æœ**: åç«¯æ­£å¸¸å¯åŠ¨

### 4. åç«¯ç›‘å¬åœ°å€é—®é¢˜ âœ…
- **é—®é¢˜**: åç«¯é…ç½®åªç›‘å¬ localhostï¼ŒDocker å®¹å™¨æ— æ³•è®¿é—®
- **è§£å†³**: ä¿®æ”¹é…ç½®é»˜è®¤ç›‘å¬ 0.0.0.0
- **ç»“æœ**: API å¯ä»¥ä»å®¹å™¨å¤–éƒ¨è®¿é—®

### 5. Backend ä»£ç è¯­æ³•é”™è¯¯ âœ…
- **é—®é¢˜**: `index.js` ç¬¬3è¡Œ `const require('express-async-errors')` è¯­æ³•é”™è¯¯
- **è§£å†³**: æ”¹ä¸º `require('express-async-errors')`
- **ç»“æœ**: åç«¯æˆåŠŸå¯åŠ¨

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
forum-crawler-service/
â”œâ”€â”€ backend/                 # Node.js/Express API æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ models/         # MongoDB æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ controllers/    # ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middlewares/    # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ crawler/                # Python çˆ¬è™«å¼•æ“
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ engine.py       # çˆ¬è™«å¼•æ“
â”‚   â”‚   â”œâ”€â”€ base_crawler.py # åŸºç¡€çˆ¬è™«ç±»
â”‚   â”‚   â”œâ”€â”€ spiders/        # å…·ä½“çˆ¬è™«å®ç°
â”‚   â”‚   â”œâ”€â”€ pipelines/      # æ•°æ®å¤„ç†ç®¡é“
â”‚   â”‚   â””â”€â”€ config.py       # çˆ¬è™«é…ç½®
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/               # React å‰ç«¯ç•Œé¢
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/       # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ App.css         # App ç»„ä»¶æ ·å¼ï¼ˆæ–°å»ºï¼‰
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker/                 # Docker é…ç½®
â”‚   â”œâ”€â”€ Dockerfile.backend  # åç«¯é•œåƒ
â”‚   â”œâ”€â”€ Dockerfile.crawler  # çˆ¬è™«é•œåƒ
â”‚   â”œâ”€â”€ Dockerfile.frontend # å‰ç«¯é•œåƒ
â”‚   â”œâ”€â”€ docker-compose.yml  # Docker Compose ç¼–æ’
â”‚   â””â”€â”€ nginx.conf          # Nginx åå‘ä»£ç†é…ç½®
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ api.md             # API æ–‡æ¡£
â”‚   â”œâ”€â”€ development.md     # å¼€å‘æŒ‡å—
â”‚   â”œâ”€â”€ deployment.md      # éƒ¨ç½²è¯´æ˜
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md              # é¡¹ç›®æ¦‚è¿°
```

## ğŸ”„ è¿è¡Œå‘½ä»¤

### å¯åŠ¨æœåŠ¡
```bash
cd /workspaces/forum-crawler-service
docker-compose -f docker/docker-compose.yml up -d
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æ‰€æœ‰å®¹å™¨æ—¥å¿—
docker-compose -f docker/docker-compose.yml logs -f

# ç‰¹å®šæœåŠ¡æ—¥å¿—
docker logs forum-crawler-backend -f
docker logs forum-crawler-frontend -f
```

### åœæ­¢æœåŠ¡
```bash
docker-compose -f docker/docker-compose.yml down
```

### é‡å¯æœåŠ¡
```bash
docker-compose -f docker/docker-compose.yml restart
```

## ğŸ“ API ç¤ºä¾‹

### 1. å¥åº·æ£€æŸ¥
```bash
curl http://localhost:5000/health
```

### 2. è·å–æ‰€æœ‰çˆ¬è™«ä»»åŠ¡
```bash
curl http://localhost:5000/api/tasks
```

### 3. åˆ›å»ºæ–°çˆ¬è™«ä»»åŠ¡
```bash
curl -X POST http://localhost:5000/api/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ç¤ºä¾‹çˆ¬è™«ä»»åŠ¡",
    "forumUrl": "https://example-forum.com",
    "maxPages": 10,
    "configuration": {
      "extractImages": true,
      "extractText": true
    }
  }'
```

### 4. è·å–çˆ¬å–çš„æ–‡ç« 
```bash
curl http://localhost:5000/api/posts
```

## ğŸ› æ•…éšœæ’é™¤

### å‰ç«¯æ— æ³•è¿æ¥åˆ° API
- æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ: `docker ps | grep backend`
- æŸ¥çœ‹åç«¯æ—¥å¿—: `docker logs forum-crawler-backend`
- ç¡®ä¿ç«¯å£ 5000 æœªè¢«å ç”¨: `netstat -tuln | grep 5000`

### MongoDB è¿æ¥é”™è¯¯
- æ£€æŸ¥ MongoDB çŠ¶æ€: `docker logs forum-crawler-mongo`
- éªŒè¯è¿æ¥å­—ç¬¦ä¸²: `MONGODB_URI=mongodb://admin:admin123@mongo:27017/forum-crawler`
- ç¡®ä¿è®¤è¯å‚æ•°: `?authSource=admin`

### Redis è¿æ¥é”™è¯¯
- æ£€æŸ¥ Redis çŠ¶æ€: `docker logs forum-crawler-redis`
- éªŒè¯è¿æ¥: `docker exec forum-crawler-redis redis-cli ping`

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [å®Œæ•´ API æ–‡æ¡£](./docs/api.md) - æ‰€æœ‰ API ç«¯ç‚¹è¯¦ç»†è¯´æ˜
- [å¼€å‘æŒ‡å—](./docs/development.md) - æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®
- [éƒ¨ç½²è¯´æ˜](./docs/deployment.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ­¥éª¤
- [å¿«é€Ÿå¼€å§‹](./docs/quickstart.md) - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- [é¡¹ç›®æ¦‚è¿°](./docs/overview.md) - æ¶æ„å’Œè®¾è®¡è¯´æ˜

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### åç«¯åŠŸèƒ½
- âœ… RESTful API è®¾è®¡
- âœ… MongoDB æ•°æ®æŒä¹…åŒ–
- âœ… Redis ç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ—
- âœ… é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… CORS è·¨åŸŸæ”¯æŒ
- âœ… ç”Ÿäº§çº§åˆ«çš„å®‰å…¨é…ç½®

### çˆ¬è™«åŠŸèƒ½
- âœ… é€šç”¨è®ºå›çˆ¬è™«å¼•æ“
- âœ… çµæ´»çš„é…ç½®ç³»ç»Ÿ
- âœ… å›¾ç‰‡ä¸‹è½½å’Œç¼©ç•¥å›¾ç”Ÿæˆ
- âœ… æ•°æ®ç®¡é“å¤„ç†
- âœ… é”™è¯¯é‡è¯•æœºåˆ¶

### å‰ç«¯åŠŸèƒ½
- âœ… ç°ä»£åŒ– React 18 ç•Œé¢
- âœ… Ant Design 5 UI ç»„ä»¶
- âœ… ä»»åŠ¡ç®¡ç†é¢æ¿
- âœ… å†…å®¹é¢„è§ˆåŠŸèƒ½
- âœ… å®æ—¶ä»»åŠ¡çŠ¶æ€æ›´æ–°

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **é…ç½®çˆ¬è™«ä»»åŠ¡** - é€šè¿‡ Web UI æ·»åŠ è®ºå› URL å’Œçˆ¬è™«é…ç½®
2. **å¯åŠ¨çˆ¬è™«** - ç‚¹å‡»"å¯åŠ¨"æŒ‰é’®å¼€å§‹çˆ¬å–æ•°æ®
3. **é¢„è§ˆå†…å®¹** - åœ¨é¢„è§ˆé¡µé¢æŸ¥çœ‹çˆ¬å–çš„æ–‡ç« å’Œå›¾ç‰‡
4. **ç›‘æ§è¿›åº¦** - åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­å®æ—¶ç›‘æ§çˆ¬è™«è¿›åº¦
5. **å¯¼å‡ºæ•°æ®** - é€šè¿‡ API å¯¼å‡ºçˆ¬å–çš„æ•°æ®

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–æ£€æŸ¥æ—¥å¿—è¾“å‡ºã€‚

---

**æœ€åæ›´æ–°**: 2025-11-29  
**éƒ¨ç½²çŠ¶æ€**: âœ… å…¨éƒ¨æˆåŠŸ  
**ç‰ˆæœ¬**: 1.0.0
